version: "2.0"
services:
  web_dev:
    image: ijuniorfu/web_dev_centos7
    privileged: true
    ports:
     - "80:80"
     - "443:443"
     - "2222:22"
    links:
      - mysql_dev:mysql
      - mongo_dev:mongo
      - redis_dev:redis
    volumes:
     - /data/htdocs:/data/htdocs
     - /data/uploads:/data/uploads
     - /data/docker/conf/nginx/conf.d:/etc/nginx/conf.d
     - /data/docker/conf/nginx/nginx.conf:/etc/nginx/nginx.conf
     - /data/docker/conf/php/php.ini:/etc/php.ini
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
  redis_dev:
    image: redis:3.2
    ports:
      - "6380:6379"
    volumes:
     - /data/datadir/redis:/data
    command:
      redis-server --appendonly yes
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
  mysql_dev:
    image: percona:5.7
    ports:
      - "3307:3306"
    environment:
      MYSQL_ROOT_PASSWORD: 123456
    volumes:
     - /data/datadir/percona:/var/lib/mysql
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
  mongo_dev:
    image: mongo:3.5
    ports:
      - "27018:27017"
    volumes:
     - /data/datadir/mongodb:/data/db
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"